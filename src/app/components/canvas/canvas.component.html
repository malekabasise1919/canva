<div class="min-h-screen bg-white flex flex-col justify-between">
  <!---------------------------------------------- Navbar ---------------------------------------------->
  <div class="fixed top-0 left-0 right-0 z-10 sm:relative bg-pencil-500">
    <div class="mx-auto pl-4 pr-5 sm:pl-8 sm:pr-10">
      <div
        class="flex justify-between items-center py-3 md:justify-start md:space-x-10"
      >
        <div class="flex justify-start items-center lg:w-0 lg:flex-1">
          <a href="#" routerLink="/canvas">
            
            
          </a>
          <a
            href="#"
            routerLink="/canvas"
            class="hidden sm:block text-base font-medium ml-6 text-white transition duration-300 hover:text-gray-400"
          >
            Canvas
          </a>
        </div>
        <div class="-mr-2 -my-2 md:hidden">
          <button
            (click)="toggleMenu()"
            type="button"
            class="rounded-md p-2 inline-flex items-center justify-center text-white hover:text-gray-300 focus:outline-none"
          >
            <svg
              *ngIf="!menu"
              class="h-6 w-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              />
            </svg>
            <svg
              *ngIf="menu"
              class="h-6 w-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        <div class="hidden md:flex items-center justify-end md:flex-1 lg:w-0">
          <a
            *ngIf="!loggedIn"
            href="#"
            routerLink="/login"
            class="whitespace-nowrap text-base font-medium text-white transition duration-300 hover:text-gray-400"
          >
            Login
          </a>
          <a
            *ngIf="!loggedIn"
            href="#"
            routerLink="/signup"
            class="ml-8 whitespace-nowrap inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-pencil-500 bg-white transition duration-300 hover:bg-gray-300"
          >
            Sign up
          </a>
          <div
            *ngIf="loggedIn"
            class="mr-4 whitespace-nowrap text-base font-medium text-white"
          >
            Hi {{ user?.email }}!
          </div>
          <a
            *ngIf="loggedIn"
            href="#"
            (click)="authService.logout()"
            routerLink="/login"
            class="whitespace-nowrap text-base font-medium text-white transition duration-300 hover:text-gray-400"
          >
            Logout
          </a>
        </div>
      </div>
    </div>

    <!---------------------------------------------- Mobile Dropdown Navbar ---------------------------------------------->
    <div *ngIf="menu" class="block sm:hidden bg-pencil-500">
      <div class="pb-6 px-5 space-y-6">
        <div class="grid gap-y-3 pl-4">
          <a
            href="#"
            (click)="toggleMenu()"
            routerLink="/canvas"
            class="text-base font-semibold text-lg text-white transition duration-300 hover:text-gray-400"
          >
            Canvas
          </a>
          <a
            *ngIf="!loggedIn"
            href="#"
            routerLink="/signup"
            class="text-base font-semibold text-lg text-white transition duration-300 hover:text-gray-400"
          >
            Sign up
          </a>
          <a
            *ngIf="!loggedIn"
            href="#"
            routerLink="/login"
            class="text-base font-semibold text-lg text-white transition duration-300 hover:text-gray-400"
          >
            Login
          </a>
          <a
            *ngIf="loggedIn"
            href="#"
            class="pointer-events-none text-base font-semibold text-lg text-white transition duration-300 hover:text-gray-400"
          >
            Hi {{ user?.email }}!
          </a>
          <a
            *ngIf="loggedIn"
            (click)="authService.logout()"
            href="#"
            routerLink="/login"
            class="text-base font-semibold text-lg text-white transition duration-300 hover:text-gray-400"
          >
            Logout
          </a>
        </div>
      </div>
    </div>
  </div>

  <!---------------------------------------------- Banner ---------------------------------------------->
  <div *ngIf="!banner" class="mt-16 sm:mt-0 h-12 bg-transparent"></div>
  <div *ngIf="banner" class="mt-16 sm:mt-0 bg-green-400">
    <div class="max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between flex-wrap">
        <div class="w-0 flex-1 flex items-center">
          <svg
            class="h-6 w-6 text-white"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fillRule="evenodd"
              d="M2 9.5A3.5 3.5 0 005.5 13H9v2.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 15.586V13h2.5a4.5 4.5 0 10-.616-8.958 4.002 4.002 0 10-7.753 1.977A3.5 3.5 0 002 9.5zm9 3.5H9V8a1 1 0 012 0v5z"
              clipRule="evenodd"
            />
          </svg>
          <p class="ml-3 font-medium text-white truncate">
            <span> Succesfully loaded saved canvas! </span>
          </p>
        </div>
        <div class="order-2 flex-shrink-0 sm:order-3 sm:ml-3">
          <button
            (click)="hideBanner()"
            type="button"
            class="-mr-1 text-white flex transition duration-300 hover:text-gray-400 focus:outline-none sm:-mr-2"
          >
            <svg
              class="h-6 w-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!---------------------------------------------- Canvas and Options ---------------------------------------------->
  <div
    class="m-auto flex flex-col px-0 pt-4 pb-24 mt-2 sm:mt-0 lg:px-12 lg:pt-8 lg:pb-28"
  >
    <h1 class="flex items-center text-5xl font-bold text-gray-900 mb-4">
      Canvas
      <svg
        *ngIf="loading"
        class="h-12 w-12 ml-3 animate-spin"
        fill="currentColor"
        viewBox="0 0 1792 1792"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"
        ></path>
      </svg>
      <svg
        *ngIf="!loading"
        class="h-12 w-12 ml-2"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
      >
        <path
          d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
        />
      </svg>
    </h1>

    <!---------------------------------------------- Buttons and Inputs ---------------------------------------------->
    <div class="flex relative flex-col xl:flex-row">
      <div
        class="relative mb-4 gap-4 grid grid-cols-1 grid-flow-row sm: sm:grid-flow-col items-center"
      >
        <div class="flex">
          <!---------------------------------------------- Change Mode Button ---------------------------------------------->
          <div class="mr-2">
            <p class="text-xs font-medium text-gray-700 mb-1">Change mode:</p>
            <div class="flex">
              <button
                (click)="setMode(1)"
                [ngClass]="
                  mode ? 'bg-indigo-500' : 'bg-gray-400 hover:bg-gray-500'
                "
                class="h-10 px-3 flex justify-center items-center border border-transparent focus:outline-none text-sm font-medium rounded-none rounded-l-md text-white transition duration-300"
              >
                <svg
                  class="h-5 w-5"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                  />
                </svg>
              </button>
              <button
                (click)="setMode(0)"
                [ngClass]="
                  !mode ? 'bg-indigo-500' : 'bg-gray-400 hover:bg-gray-500'
                "
                class="h-10 px-3 flex justify-center items-center border border-transparent focus:outline-none text-sm font-medium rounded-none rounded-r-md text-white transition duration-300"
              >
                <svg
                  class="h-4 w-4 mx-0.5"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fillRule="evenodd"
                    d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.415 1.415l.707-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z"
                    clipRule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </div>

          <!---------------------------------------------- Change Stroke Color Input ---------------------------------------------->
          <div class="flex ml-2">
            <div>
              <p class="text-xs font-medium text-gray-700 mb-1">
                Change stroke color:
              </p>
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
                >
                  <span class="text-white">
                    <svg
                      class="h-5 w-5"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                    >
                      <path
                        fillRule="evenodd"
                        d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z"
                        clipRule="evenodd"
                      />
                    </svg>
                  </span>
                </div>
                <input
                  class="w-32 h-10 pl-11 pr-4 pb-0.5 text-sm font-medium text-white rounded-md cursor-pointer focus:outline-none"
                  [value]="color"
                  readonly
                  [(colorPicker)]="color"
                  [style.background]="color"
                  (colorPickerChange)="changeColor($event)"
                />
              </div>
            </div>
          </div>
        </div>

        <!---------------------------------------------- Upload an Image Button ---------------------------------------------->
        <div>
          <p class="text-xs font-medium text-gray-700 mb-1">Upload an image:</p>
          <button
            (click)="this.document.getElementById('uploadButton').click()"
            class="w-full h-10 flex justify-center items-center px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-500 transition duration-300 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600"
          >
            <input
              id="uploadButton"
              class="hidden"
              type="file"
              (change)="uploadImage($event)"
              accept=".png,.jpg"
            />
            <svg
              class="h-5 w-5 mr-2"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fillRule="evenodd"
                d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                clipRule="evenodd"
              />
            </svg>
            Upload image
          </button>
        </div>

        <!---------------------------------------------- Load a Shared Canvas Button ---------------------------------------------->
        <div>
          <p class="text-xs font-medium text-gray-700 mb-1">
            Load a shared canvas:
          </p>

          <button
            (click)="showModal()"
            class="w-full h-10 flex justify-center items-center px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-500 transition duration-300 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600"
          >
            <svg
              class="h-5 w-5 mr-2"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"
              />
            </svg>
            Load shared canvas
          </button>
        </div>
      </div>

      <!---------------------------------------------- Share Canvas Input ---------------------------------------------->
      <div class="mb-6 sm:mb-4 xl:absolute xl:right-0 xl:mb-0">
        <p class="text-xs font-medium text-gray-700 mb-1">Share canvas:</p>
        <div class="mt-1 flex rounded-md shadow-sm">
          <input
            (keyup.enter)="shareButton.click()"
            type="email"
            name="email"
            id="email"
            class="px-3 w-full xl:w-80 border border-gray-300 bg-gray-50 rounded-none rounded-l-md sm:text-sm outline-none"
            placeholder="Email address"
            #email
          />
          <button
            (click)="shareCanvas(email.value)"
            class="w-20 h-10 flex justify-center items-center px-4 border border-transparent text-sm font-medium rounded-none rounded-r-md text-white bg-indigo-500 transition duration-300 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600"
            #shareButton
          >
            Share
          </button>
        </div>
      </div>
    </div>

    <!---------------------------------------------- Shimmer Loading Effect ---------------------------------------------->
    <div>
      <div class="animate-pulse flex">
        <div
          *ngIf="shimmer"
          [style.width.px]="
            width - 120 > 1400 ? 1400 : width >= 1024 ? width - 120 : width - 30
          "
          [style.height.px]="600"
          [ngStyle]="{ 'background-color': '#ededed' }"
        ></div>
      </div>

      <!---------------------------------------------- Canvas ---------------------------------------------->
      <canvas id="canvas"></canvas>

      <!---------------------------------------------- Modal ---------------------------------------------->
      <div *ngIf="modal" class="fixed z-10 inset-0 overflow-y-auto">
        <div
          class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
        >
          <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
          </div>
          <span
            class="hidden sm:inline-block sm:align-middle sm:h-screen"
            aria-hidden="true"
            >&#8203;</span
          >
          <div
            class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
            role="dialog"
            aria-modal="true"
            aria-labelledby="modal-headline"
          >
            <div class="bg-white px-4 pt-3 pb-4 sm:px-6 sm:pt-8 sm:pb-0">
              <div class="sm:flex sm:items-start">
                <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                  <h3
                    class="text-lg leading-6 font-medium text-gray-900"
                    id="modal-headline"
                  >
                    Load a shared canvas:
                  </h3>
                  <div class="mt-4 w-full">
                    <p
                      *ngIf="
                        sharedCanvases?.length == 0 ||
                        sharedCanvases == undefined
                      "
                      class="text-sm text-gray-500"
                    >
                      You currently have no shared canvases.
                    </p>
                    <div
                      class="max-h-64 overflow-y-auto"
                      *ngIf="
                        sharedCanvases?.length > 0 &&
                        sharedCanvases != undefined
                      "
                    >
                      <div
                        class="flex flex-col"
                        *ngFor="
                          let sharedCanvas of sharedCanvases;
                          let i = index
                        "
                        [attr.data-index]="i"
                      >
                        <button
                          (click)="setSharedIndex(i)"
                          [ngClass]="
                            sharedIndex != i
                              ? 'bg-gray-200 hover:bg-gray-400 text-black'
                              : 'bg-indigo-600 hover:bg-indigo-700 text-white'
                          "
                          class="w-full py-2 px-4 mb-2 rounded-md text-left transition duration-300 focus:outline-none"
                        >
                          {{ sharedCanvas.user }}'s canvas
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="bg-gray-50 px-4 pt-1 pb-5 mb-3 sm:px-6 sm:pt-4 sm:flex sm:flex-row-reverse"
            >
              <button
                (click)="loadSharedCanvas()"
                type="button"
                [ngClass]="
                  sharedCanvases?.length == 0 ||
                  sharedCanvases == undefined ||
                  sharedIndex == -1
                    ? 'border-gray-300 bg-white text-gray-300 hover:bg-gray-50 pointer-events-none'
                    : 'border-transparent text-white bg-indigo-600 transition duration-300 hover:bg-indigo-700 focus:ring-indigo-500 '
                "
                class="w-full inline-flex justify-center rounded-md border shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"
              >
                Load Canvas
              </button>
              <button
                (click)="hideModal()"
                type="button"
                class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 text-base font-medium transition duration-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!---------------------------------------------- Footer ---------------------------------------------->
  
</div>
